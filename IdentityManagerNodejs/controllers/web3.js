
var Web3 = require("web3");

if (typeof web3 !== 'undefined') {
  web3 = new Web3(web3.currentProvider);
} else {
  // set the provider you want from Web3.providers
  web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
}

var primaryAddress = web3.eth.accounts[0];

var abi =[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"bytes32"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"nickname","type":"bytes32"},{"name":"aplicacion","type":"bytes32"}],"name":"borrarRegistro","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"apps","outputs":[{"name":"nombre","type":"bytes32"},{"name":"direccion","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"rol1","type":"bytes32"},{"name":"nickname","type":"bytes32"},{"name":"aplicacion","type":"bytes32"},{"name":"token","type":"bytes32"}],"name":"registrarUsuario","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"devuelveUsers","outputs":[{"name":"","type":"bytes32[]"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"relacionUsuarios","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"resultado","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"app","type":"address"}],"name":"devuelveNombreApp","outputs":[{"name":"","type":"bytes32"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"user","type":"bytes32"}],"name":"devuelveApps","outputs":[{"name":"appsuser","type":"address[]"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"direction","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"result","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"aplicacion","type":"bytes32"}],"name":"devuelveApproles","outputs":[{"name":"","type":"bytes32[]"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"user","type":"address"},{"name":"hash","type":"bytes32"},{"name":"rol","type":"bytes32"}],"name":"controla","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"users","outputs":[{"name":"nombre","type":"bytes32"},{"name":"direccion","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"devuelveTodasApps","outputs":[{"name":"","type":"bytes32[]"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"user","type":"bytes32"}],"name":"devuelveRoles","outputs":[{"name":"rolesuser","type":"bytes32[]"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"aplicacion","type":"bytes32"}],"name":"devuelveAppaddr","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"aplicacion","type":"bytes32"},{"name":"a","type":"address"},{"name":"b","type":"bytes32[]"}],"name":"registrarApp","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"relacionApps","outputs":[{"name":"","type":"bytes32"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"user","type":"bytes32"}],"name":"devuelveAddressUsuario","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"a","type":"address"},{"name":"rol","type":"bytes32"}],"name":"comprueba","outputs":[{"name":"isRegistered","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"controlador","outputs":[{"name":"direccionApp","type":"address"},{"name":"hash","type":"bytes32"},{"name":"rol","type":"bytes32"}],"payable":false,"type":"function"},{"inputs":[{"name":"_name","type":"bytes32"}],"payable":false,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"key","type":"address"}],"name":"NewUser","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"mensaje","type":"string"}],"name":"RegistrationNeeded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"mensaje","type":"string"}],"name":"WrongRole","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"result","type":"bytes32"}],"name":"Result","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"a","type":"bool"}],"name":"Resultado","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"array","type":"bytes32[]"}],"name":"Array","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"array","type":"address[]"}],"name":"ArrayAddr","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"","type":"string"}],"name":"Resultstring","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"","type":"string"}],"name":"MalNombreApp","type":"event"}];
var code = "0x6060604052341561000c57fe5b6040516020806129c2833981016040528080519060200190919050505b806000816000191690555033600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b505b61293b806100876000396000f30060606040523615610126576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde03146101285780632d6df3681461015657806338bb6def146101875780633aa0eafb146101fa57806341e14251146102455780634f8c3d1a146102ba5780635206f1001461031e57806358e3e914146103485780635eab15e41461039a578063645539ed14610421578063653721471461047357806396a44d35146104995780639de18f9c14610520578063a87430ba14610570578063b3f523a8146105f5578063b6f73bb91461066a578063ba9d4c09146106f1578063d6f50ed614610755578063dacf45bd146107d8578063dd5235591461082a578063f0ecadaf1461088e578063f881d34d146108e9575bfe5b341561013057fe5b61013861097d565b60405180826000191660001916815260200191505060405180910390f35b341561015e57fe5b61018560048080356000191690602001909190803560001916906020019091905050610983565b005b341561018f57fe5b6101a9600480803560001916906020019091905050610ce3565b6040518083600019166000191681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019250505060405180910390f35b341561020257fe5b610243600480803560001916906020019091908035600019169060200190919080356000191690602001909190803560001916906020019091905050610d27565b005b341561024d57fe5b6102556118ca565b60405180806020018281038252838181518152602001915080519060200190602002808383600083146102a7575b8051825260208311156102a757602082019150602081019050602083039250610283565b5050509050019250505060405180910390f35b34156102c257fe5b6102dc60048080356000191690602001909190505061192d565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561032657fe5b61032e611960565b604051808215151515815260200191505060405180910390f35b341561035057fe5b61037c600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611973565b60405180826000191660001916815260200191505060405180910390f35b34156103a257fe5b6103bc6004808035600019169060200190919050506119bd565b604051808060200182810382528381815181526020019150805190602001906020028083836000831461040e575b80518252602083111561040e576020820191506020810190506020830392506103ea565b5050509050019250505060405180910390f35b341561042957fe5b610431611c00565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561047b57fe5b610483611c26565b6040518082815260200191505060405180910390f35b34156104a157fe5b6104bb600480803560001916906020019091905050611c2c565b604051808060200182810382528381815181526020019150805190602001906020028083836000831461050d575b80518252602083111561050d576020820191506020810190506020830392506104e9565b5050509050019250505060405180910390f35b341561052857fe5b61056e600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919080356000191690602001909190803560001916906020019091905050611cad565b005b341561057857fe5b6105a4600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611e21565b6040518083600019166000191681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019250505060405180910390f35b34156105fd57fe5b610605611e65565b6040518080602001828103825283818151815260200191508051906020019060200280838360008314610657575b80518252602083111561065757602082019150602081019050602083039250610633565b5050509050019250505060405180910390f35b341561067257fe5b61068c600480803560001916906020019091905050611ec8565b60405180806020018281038252838181518152602001915080519060200190602002808383600083146106de575b8051825260208311156106de576020820191506020810190506020830392506106ba565b5050509050019250505060405180910390f35b34156106f957fe5b6107136004808035600019169060200190919050506120d9565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561075d57fe5b6107d660048080356000191690602001909190803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001908201803590602001908080602002602001604051908101604052809392919081815260200183836020028082843782019150505050505091905050612122565b005b34156107e057fe5b61080c600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061237e565b60405180826000191660001916815260200191505060405180910390f35b341561083257fe5b61084c600480803560001916906020019091905050612396565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561089657fe5b6108cf600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035600019169060200190919050506123dc565b604051808215151515815260200191505060405180910390f35b34156108f157fe5b61091d600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050612637565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200183600019166000191681526020018260001916600019168152602001935050505060405180910390f35b60005481565b60006000610990836120d9565b9150600090505b600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060030180549050811015610c10578173ffffffffffffffffffffffffffffffffffffffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060030182815481101515610a4a57fe5b906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515610c0257600a8054806001018281610aa89190612681565b916000526020600020900160005b600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060030184815481101515610b0557fe5b906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050600c8054806001018281610b8791906126ad565b916000526020600020900160005b600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020184815481101515610be457fe5b906000526020600020900160005b5054909190915090600019169055505b5b8080600101915050610997565b600a600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301908054610c629291906126d9565b50600c600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600201908054610cb592919061272b565b50600b600a908054610cc89291906126d9565b50600d600c908054610cdb92919061272b565b505b50505050565b60066020528060005260406000206000915090508060000154908060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905082565b600060006000600060006000600060006000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000015460001916141515610e6e578a60001916600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000015460001916141515610e6d577f438409ec0b5676d7841a3230751a173fe0a7ec06f5424fd9404c29bf6976eedf6040518080602001828103825260238152602001807f7375206e6f6d627265206465207573756172696f206e6f20657320636f72726581526020017f63746f000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390a16118bc565b5b610e778a6120d9565b97508860001916600960003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206001015460001916148015610f5f5750600960003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168873ffffffffffffffffffffffffffffffffffffffff16145b8015610fb45750600960003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020154600019168c60001916145b15611863576000600660008c6000191660001916815260200190815260200160002060000154600019161415156118585760019650600095505b600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301805490508610156110fd578773ffffffffffffffffffffffffffffffffffffffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301878154811015156110a157fe5b906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156110ef57600096505b5b8580600101965050610fee565b86156117fb5733600760008d6000191660001916815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600094505b600660008b60001916600019168152602001908152602001600020600201805490508510156117f6578b60001916600660008c60001916600019168152602001908152602001600020600201868154811015156111bb57fe5b906000526020600020900160005b505460001916141561177557600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600201935083805480600101828161122c91906126ad565b916000526020600020900160005b8e90919091509060001916905550600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301925082805480600101828161129f9190612681565b916000526020600020900160005b8a909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550506080604051908101604052808c6000191681526020013373ffffffffffffffffffffffffffffffffffffffff1681526020018580548060200260200160405190810160405280929190818152602001828054801561137057602002820191906000526020600020905b81546000191681526020019060010190808311611358575b50505050508152602001848054806020026020016040519081016040528092919081815260200182805480156113fb57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116113b1575b5050505050815250600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000820151816000019060001916905560208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060408201518160020190805190602001906114b592919061277d565b5060608201518160030190805190602001906114d29291906127d0565b509050507f9782e43d253523a5acb8e376e2c5bb5abbf46a1f032d929e135c93f5b4d8f0dd600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206002016001600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600201805490500381548110151561158e57fe5b906000526020600020900160005b505460405180826000191660001916815260200191505060405180910390a17f7ee9b70bf129b91a237044ce07c93c79f5562b96b53c04f7edaf7c9d6711f3d8600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206003016001600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301805490500381548110151561167357fe5b906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a160009150600090505b600380549050811015611738578a6000191660038281548110151561170b57fe5b906000526020600020900160005b505460001916141561172a57600191505b5b80806001019150506116ea565b811515611770576003805480600101828161175391906126ad565b916000526020600020900160005b8d909190915090600019169055505b6117e8565b60028514156117e7577f9f7c972060b934d6caae3fee88bdbdebb94772f06994ac275fced5645342215c60405180806020018281038252601f8152602001807f456c20726f6c20696e74726f64756369646f206e6f2065732076616c69646f0081525060200191505060405180910390a15b5b5b8480600101955050611162565b611853565b7f9782e43d253523a5acb8e376e2c5bb5abbf46a1f032d929e135c93f5b4d8f0dd60405180807f596120657374c3a1207265676973747261646f20656e20657361206170700000815250602001905060405180910390a15b61185e565b60006000fd5b6118bb565b7f9782e43d253523a5acb8e376e2c5bb5abbf46a1f032d929e135c93f5b4d8f0dd60405180807f546f6b656e206d616c6f00000000000000000000000000000000000000000000815250602001905060405180910390a15b5b505050505050505050505050565b6118d261285a565b600380548060200260200160405190810160405280929190818152602001828054801561192257602002820191906000526020600020905b8154600019168152602001906001019080831161190a575b505050505090505b90565b60076020528060005260406000206000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160149054906101000a900460ff1681565b6000600860008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b6119c561286e565b600060076000846000191660001916815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611aa7577f438409ec0b5676d7841a3230751a173fe0a7ec06f5424fd9404c29bf6976eedf60405180806020018281038252600c8152602001807f496e666f2070726976616461000000000000000000000000000000000000000081525060200191505060405180910390a1611bfa565b600560008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301805480602002602001604051908101604052809291908181526020018280548015611b6957602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311611b1f575b505050505091507ffeac3f272e34410d7b2be40df926ce4286ce6f3678a1427eae4524b015b4b6ee826040518080602001828103825283818151815260200191508051906020019060200280838360008314611be4575b805182526020831115611be457602082019150602081019050602083039250611bc0565b5050509050019250505060405180910390a18191505b50919050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60025481565b611c3461285a565b600660008360001916600019168152602001908152602001600020600201805480602002602001604051908101604052809291908181526020018280548015611ca057602002820191906000526020600020905b81546000191681526020019060010190808311611c88575b505050505090505b919050565b81600960008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600101816000191690555033600960008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600960008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020181600019169055507f9782e43d253523a5acb8e376e2c5bb5abbf46a1f032d929e135c93f5b4d8f0dd60405180807f546f6b656e206465205573756172696f207265676973747261646f0000000000815250602001905060405180910390a15b505050565b60056020528060005260406000206000915090508060000154908060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905082565b611e6d61285a565b6004805480602002602001604051908101604052809291908181526020018280548015611ebd57602002820191906000526020600020905b81546000191681526020019060010190808311611ea5575b505050505090505b90565b611ed061285a565b600060076000846000191660001916815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611fb2577f438409ec0b5676d7841a3230751a173fe0a7ec06f5424fd9404c29bf6976eedf60405180806020018281038252600c8152602001807f496e666f2070726976616461000000000000000000000000000000000000000081525060200191505060405180910390a16120d3565b600560008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020180548060200260200160405190810160405280929190818152602001828054801561204257602002820191906000526020600020905b8154600019168152602001906001019080831161202a575b505050505091507f939f8dc08c4b2ea74fdbe5fd354522bec79971f48c10655696bdb15a000220c78260405180806020018281038252838181518152602001915080519060200190602002808383600083146120bd575b8051825260208311156120bd57602082019150602081019050602083039250612099565b5050509050019250505060405180910390a18191505b50919050565b600060066000836000191660001916815260200190815260200160002060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505b919050565b6000600660008560001916600019168152602001908152602001600020600001546000191614156122e957606060405190810160405280846000191681526020018373ffffffffffffffffffffffffffffffffffffffff168152602001828152506006600085600019166000191681526020019081526020016000206000820151816000019060001916905560208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550604082015181600201908051906020019061221192919061277d565b5090505082600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081600019169055507f9782e43d253523a5acb8e376e2c5bb5abbf46a1f032d929e135c93f5b4d8f0dd60405180807f417070207265676973747261646120636f7272656374616d656e746500000000815250602001905060405180910390a1600480548060010182816122c891906126ad565b916000526020600020900160005b8590919091509060001916905550612378565b7f5082ad642909048b671d7ee3ce078172b927bd6f08c9c6b6ba06d034e2afc59660405180806020018281038252602d8152602001807f64656265207265676973747261722073752061706c6963616369c3b36e20636f81526020017f6e206f74726f206e6f6d6272650000000000000000000000000000000000000081525060400191505060405180910390a15b5b505050565b60086020528060005260406000206000915090505481565b600060076000836000191660001916815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505b919050565b60006000600090505b600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301805490508110156125f1573373ffffffffffffffffffffffffffffffffffffffff16600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206003018281548110151561249857fe5b906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156125e2578260001916600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206002018281548110151561253557fe5b906000526020600020900160005b505460001916141561259657600191507f09a7e8f6c2d9607da033e1fc289aa3a501ea2db5d7b0b55b9c8dfd61d98ba2a682604051808215151515815260200191505060405180910390a1819150612630565b600091507f09a7e8f6c2d9607da033e1fc289aa3a501ea2db5d7b0b55b9c8dfd61d98ba2a682604051808215151515815260200191505060405180910390a1819150612630565b6125e3565b5b5b80806001019150506123e5565b7f09a7e8f6c2d9607da033e1fc289aa3a501ea2db5d7b0b55b9c8dfd61d98ba2a682604051808215151515815260200191505060405180910390a18191505b5092915050565b60096020528060005260406000206000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060010154908060020154905083565b8154818355818115116126a8578183600052602060002091820191016126a79190612882565b5b505050565b8154818355818115116126d4578183600052602060002091820191016126d391906128a7565b5b505050565b82805482825590600052602060002090810192821561271a5760005260206000209182015b828111156127195782548255916001019190600101906126fe565b5b50905061272791906128cc565b5090565b82805482825590600052602060002090810192821561276c5760005260206000209182015b8281111561276b578254825591600101919060010190612750565b5b50905061277991906128a7565b5090565b8280548282559060005260206000209081019282156127bf579160200282015b828111156127be57825182906000191690559160200191906001019061279d565b5b5090506127cc91906128a7565b5090565b828054828255906000526020600020908101928215612849579160200282015b828111156128485782518260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550916020019190600101906127f0565b5b50905061285691906128cc565b5090565b602060405190810160405280600081525090565b602060405190810160405280600081525090565b6128a491905b808211156128a0576000816000905550600101612888565b5090565b90565b6128c991905b808211156128c55760008160009055506001016128ad565b5090565b90565b61290c91905b8082111561290857600081816101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055506001016128d2565b5090565b905600a165627a7a72305820281f9fc2f13b6ae5307c57eb6533affabe97f1cf5a98211f87da7d61a050997c0029";

var MyContract = web3.eth.contract(abi);

/**
 * Asignar y configurar el servidor Socket.io por el que enviar mensajes notificando de cambios en aforos.
 */
function setIO(io) {

	io.on('connection', function (socket) {

		var events = [];
		console.log("adkjoadji");

		socket.emit('malnombreapp', {
	    				mensaj : "hola"
	    			} );



		socket.on('hola', function (data) {
			console.log("adkjoadji");
			var addr = data.addr;

			var contractInstance = MyContract.at("0xd7f2cf0d7fdbd1c1388eacf30b2b3ec0b6a6d008");
			contractInstance.MalNombreApp(function(err,data){
        
        	console.log("El nombre introducido ya existe, introduzca otro");
        	socket.emit('malnombreapp', {
	    				mensaj : "hola"
	    			} );
    });

	    	

	   	}); 	

		socket.on('disconnect', function () {
			events.forEach(function(event) {event.stopWatching();});
		});
	});
}



exports.web3 = web3;
exports.primaryAddress = primaryAddress;
exports.abi = abi;
exports.code = code;
exports.MyContract = MyContract;
exports.setIO = setIO;
